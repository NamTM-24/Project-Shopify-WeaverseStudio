import{e as a}from"./shopify.js";import{B as $,S as q,g as P}from"./base-section.js";import{N as z}from"./navigation.js";import{c as W,r as h,m as G,o as H,a as x,w as K,n as U}from"./vue.esm-bundler.js";import{u as X}from"./use-master-product-card.js";import{u as j}from"./use-viewport-size.js";import{A as p}from"./animations.js";import{S as c,i as J}from"./swiper.js";import{k as Q}from"./analytics-data.js";import"./create-element-if-not-defined.js";import"./swiper-core.js";import"./use-cart-drawer-visibility.js";import"./use-dynamic-yield-api.js";import"./cookies.js";import"./dynamic-yield-settings.js";import"./dynamic-yield-events.js";import"./campaigns.js";import"./currency.js";import"./_commonjsHelpers.js";import"./validator.js";import"./device.js";const Y={breakpoints:{0:{slidesPerView:1.3},768:{slidesPerView:2.6},1024:{slidesPerView:3.6}},initialSlide:0,modules:[z],roundLengths:!0,slidesOffsetBefore:10,spaceBetween:10,updateOnWindowResize:!0},Z=3,I={DESKTOP:9,MOBILE:4},S="standard-product-carousel";class ee extends ${constructor(){super(`[data-section-type="${S}"]`)}init(i){const e=i.container,o=this;if(!e){a("[Allbirds section] - Standard Product Carousel - init - Container not found",{},new Error("Container not found"));return}W({name:"StandardProductCarouselSection",setup(){const{cardRefs:y,getVariantDescription:T,getVariantLabel:L,handleAddToCart:O,initializeAllCards:N,setActiveColorway:v,setActiveVariant:M,toggleSizeSelector:_}=X(),{isLarge:V}=j();let r=null,u=null,d=!1;const m=h(null),f=h(0),b=e.getAttribute("data-analytics-section-name"),R=G(()=>f.value>Z),F=t=>{P.fromTo(t,{opacity:0},{...p.FADE_IN,duration:p.FADE_IN.duration*1.5})},g=async t=>{if(!d){d=!0;try{m.value=t;const s=e.querySelector(`[data-${S}-block-id="${t}"]`);if(!s)return;const n=e.querySelector(c.WRAPPER);if(!n){a("[Allbirds section] - Standard Product Carousel - handleProductGroupSwitch - Main carousel wrapper not found",{productGroupId:t});return}if(r&&(r.destroy(),r=null),u){const l=e.querySelector(`[data-${S}-block-id="${u}"]`);if(l){const C=l.querySelector(c.WRAPPER),E=n.querySelectorAll(`${c.SLIDE}:not(.swiper-slide-duplicate)`);C&&E.length>0&&Array.from(E).forEach(D=>{C.appendChild(D)})}}const A=s.querySelectorAll(c.SLIDE),w=A.length;f.value=w,n.innerHTML="",Array.from(A).forEach(l=>{n.appendChild(l)}),u=t,await U();const k=V.value?I.DESKTOP:I.MOBILE,B=w>=k;if(r=J(e,{...Y,loop:B}),!r){a("[Allbirds section] - Standard Product Carousel - Failed to reinitialize carousel",{productGroupId:t});return}F(n)}finally{d=!1}}};return H(async()=>{const t=e.getAttribute("data-initial-product-group-id");N(e);try{t&&await g(t)}catch(s){a("[Allbirds section] - Standard Product Carousel - Error initializing carousel:",{},s)}}),x(()=>{r?.destroy(),r=null}),K(m,()=>{o.isHomePageTemplate()&&Q({sectionName:b})}),{activeProductGroup:m,cardRefs:y,getVariantDescription:T,getVariantLabel:L,handleAddToCart:O,handleProductGroupSwitch:g,setActiveColorway:v,setActiveVariant:M,showNavigation:R,toggleSizeSelector:_}}}).mount(e)}setupInViewAnimation(i){if(i.animation)i.animation.paused(!1),q.refresh();else{const e=this.setupAnimation(i,()=>this.setupInViewAnimationTimeline(i));e&&e.scrollTrigger&&(i.scrollTrigger=e.scrollTrigger)}}setupInViewAnimationTimeline(i){const e=i.container;if(!e)return a("[Allbirds section] - Standard Product Carousel - setupInViewAnimationTimeline - Missing elements for in-view animation",{},new Error("Missing elements for in-view animation")),null;const o=P.timeline({paused:!0,scrollTrigger:{...this.getInViewAnimationOptions(),trigger:e}});return o?(o.to(e,p.FADE_IN,0),o):null}}document.addEventListener("DOMContentLoaded",()=>{new ee});
//# sourceMappingURL=standard-product-carousel.js.map
