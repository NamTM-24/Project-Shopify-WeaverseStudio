import{B as w,g as I}from"./base-section.js";import{A as k}from"./autoplay.js";import{E as g}from"./effect-fade.js";import{c as A,r as u,o as C,a as E}from"./vue.esm-bundler.js";import{u as O}from"./use-quick-view.js";import{A as b}from"./animations.js";import{e as a}from"./shopify.js";import{i as v}from"./swiper.js";import{k as S}from"./analytics-data.js";import{u as V}from"./use-video.js";import"./swiper-core.js";import"./effect-virtual-transition-end.js";import"./use-scroll-lock.js";import"./device.js";import"./use-viewport-size.js";import"./cookies.js";import"./_commonjsHelpers.js";import"./validator.js";const d="color-grid",T={allowTouchMove:!1,autoplay:{delay:4e3,disableOnInteraction:!1},effect:"fade",fadeEffect:{crossFade:!0},modules:[k,g],slidesPerView:1};class M extends w{constructor(){super(`[data-section-type="${d}"]`)}init(i){const e=i.container,n=e.querySelectorAll('[data-block-type="video-card"]'),m=e.querySelectorAll('[data-block-type="product-card"]'),p=Number(e.getAttribute("data-autoplay-delay")),f=this;if(!e){a("[Allbirds section] - Color Grid - init - Container not found",{},new Error("Container not found"));return}A({name:"ColorGridCarouselSection",setup(){let r=null;const s=u({}),l=u({}),y=()=>{r=v(e,{...T,autoplay:{delay:p,disableOnInteraction:!1}}),r||a("[Allbirds section] - Color Grid - initCarousel - Failed to initialize Swiper",{sectionId:e.id})};return C(()=>{n.forEach(o=>{const t=o.dataset.videoId;if(!t)return;const c=V(t);c.init(),s.value[t]=c}),m.forEach(o=>{const t=o.dataset.productId;o.dataset.enableQuickView==="true"&&t&&(l.value[t]=O({closeOnClickOutside:o.dataset.closeQuickViewOnClickOutside==="true",closeOnEscapeKey:o.dataset.closeQuickViewOnEscapeKey==="true",id:t,isOpenByDefault:o.dataset.openQuickViewByDefault==="true",stickyOnMobile:o.dataset.stickyQuickViewMobile==="true"}))}),f.isHomePageTemplate()&&S({sectionName:d}),y()}),E(()=>{r?.destroy(),r=null}),{quickViewRefs:l,videoRefs:s}}}).mount(e)}onUnload(i){i.animation&&i.animation.scrollTrigger&&i.animation.scrollTrigger.kill(),i.animation&&(i.animation.kill(),i.animation=null);const e=i.container.__vue_app__;e&&e.unmount()}setupInViewAnimationTimeline(i){const e=i.container;if(!e)return a("[Allbirds section] - Color Grid - setupInViewAnimationTimeline - Missing elements for in-view animation",{},new Error("Missing elements for in-view animation")),null;const n=I.timeline({paused:!0,scrollTrigger:{...this.getInViewAnimationOptions(),trigger:e}});return n?(n.to(e,b.FADE_IN,0),n):null}}document.addEventListener("DOMContentLoaded",()=>{new M});
//# sourceMappingURL=color-grid.js.map
